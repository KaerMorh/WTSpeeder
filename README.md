# WTSpeeder (War Thunder Airspeed Assistant)

**WTSpeeder** 是一款专为《战争雷霆》（War Thunder）空战玩家设计的辅助工具。它通过悬浮窗实时显示指示空速（IAS），并根据当前驾驶机型的气动结构极限，提供智能的**超速警告**，有效防止在俯冲或高速平飞时因超速导致机翼断裂。

> **注意**：本项目致力于提供无侵入、专注于飞行安全的速度监控体验。

---

## 🚀 核心功能 (Core Features)

### 1. 实时空速悬浮窗 (Speed Overlay)
*   **透明悬浮显示**：在游戏画面上方覆盖一个无边框、背景透明的数字显示，实时反馈当前空速（IAS）。
*   **极简模式**：支持**只显示圆球**（隐藏文字），仅通过圆点颜色的变化（绿/红）来提示速度状态，最大程度减少视觉干扰。
*   **十字准星**：可选在圆球中心显示透明的十字准星，可用作屏幕中心参考点。
*   **完全自定义**：可调整字体大小、圆球大小、颜色、显示位置（拖拽调整）、刷新率等。
*   **智能隐藏**：支持仅在空战模式或战斗中显示，避免在菜单界面遮挡视线。

### 2. 智能极速警告 (Smart Speed Warning)
*   **内置机型数据库**：程序内置了大量飞机的气动数据（`FM/fm_data_db.csv`），能识别你当前驾驶的飞机型号及其最大允许速度（Vne）。
*   **分级警报**：
    *   **视觉警告**：当接近极限速度（默认 97%）时，数字/圆球颜色会自动变红。
    *   **声音警告**：提供两级蜂鸣声提示（"Warning" 和 "Critical"），无需看屏幕也能感知危险。

### 3. 飞行数据记录 (Flight Recorder)
*   **CSV 记录器**：内置隐藏的调试记录功能。
*   **启用方式**：连续点击悬浮窗圆球 **4次以上**，右键菜单中会出现 "📝 记录日志 (Debug Log)" 选项。勾选后，程序会将飞行数据（IAS, Mach, 节流阀等）记录到 `logs/` 目录下的 CSV 文件中，便于分析。

### 4. 安全与合规
*   **100% 合法 (Legitimate)**：程序的核心功能（显示与警告）完全依赖官方提供的本地数据接口 (`http://127.0.0.1:8111`) 获取数据。
*   **非注入式 (External)**：**不读取也不修改游戏内存**，完全符合 Gaijin 的第三方工具政策（机制类似于 WTRTI）。
*   **单例保护**：程序内置防多开机制，避免重复运行导致冲突。

---

## 🛠️ 安装与使用

### 运行程序
1.  确保已安装 Python 3.x 环境（如果是源码运行）。
2.  运行 `overlay.py` 或打包好的 `.exe` 文件。
3.  启动《战争雷霆》，进入试飞或战斗。
4.  此时屏幕上应出现绿色的速度读数。

### 常用操作
*   **移动位置**：按住悬浮窗的数字或左侧的手柄圆点，即可拖动位置。程序会自动记忆上次的位置。
*   **打开设置**：右键点击悬浮窗数字，或右键点击任务栏右下角的托盘图标，选择 **Settings**。
*   **快速隐藏/恢复**：左键单击任务栏右下角的托盘图标，可快速切换悬浮窗的显示/隐藏状态。

### 设置项说明
*   **UI 设置**:
    *   **Handle Size**: 调整拖拽手柄圆球的大小。
    *   **Hide Text**: 勾选后只显示圆球，隐藏具体的空速数值。
    *   **Show Crosshair**: 在圆球中心显示一个透明的十字准星。
*   **Warn Percent**: 触发红色警告的速度百分比（例如 97 表示 97% 的解体速度）。
*   **Sound**: 开启/关闭声音提示及调节音量。

---

## ⚙️ 依赖项 (源码运行)

如果你直接运行 Python 源码，请确保安装以下库：

pip install requests pygame pystray Pillow---

## ⚠️ 常见问题

*   **Q: 为什么显示 "?"**
    *   A: 游戏未运行，或尚未进入战斗（未加载气动模型）。
*   **Q: 声音不响？**
    *   A: 检查设置里的 `Enable Sound` 是否勾选，以及 `sounds/` 目录下是否有对应的 `.wav` 文件。

---

## 📝 免责声明

本工具仅作为辅助显示用途，核心功能完全合规。作者不对因使用本软件造成的任何游戏账户问题负责，请玩家在遵守游戏官方规则的前提下使用。